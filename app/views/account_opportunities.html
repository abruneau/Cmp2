<div class="panel-body">
  <div class="responsive-table">
    <div class="row">
      <div class="col-sm-6">
        <form class="form-inline">
          <div class="form-group">
            <label class="sr-only" for="search">Search</label>
            <input type="text" class="form-control" id="search" placeholder="Search" ng-model="search">
          </div>
          <div class="checkbox">
            <label>
              <input type="checkbox" ng-model="showClosedOpport">
              Show closed opportunity
            </label>
          </div>
        </form>
      </div>
      <div class="col-sm-6">
        <a class="pull-right" ng-click="updateOpportunities()">
          <i class="fa fa-refresh"></i>
        </a>
      </div>
    </div>
    <div class="row" style="margin-top: 1%;">
      <div class="col-sm-12">
        <div class="spinner" ng-if="refreching">
          <div class="sk-chasing-dots">
            <div class="sk-child sk-dot1"></div>
            <div class="sk-child sk-dot2"></div>
          </div>
        </div>
        <table id="datatables-example" class="table table-striped table-bordered dataTable no-footer" width="100%" cellspacing="0" role="grid" aria-describedby="datatables-example_info" style="width: 100%; background-color: white;">
          <thead>
            <tr role="row">
              <th>
                <a ng-click="sortType = 'CreatedDate'; sortReverse = !sortReverse">
                  Created Date
                  <span ng-show="sortType == 'CreatedDate' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'CreatedDate' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </th>
              <th>
                <a ng-click="sortType = 'Name'; sortReverse = !sortReverse">
                  Name
                  <span ng-show="sortType == 'Name' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'Name' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </th>
              <th>
                <a ng-click="sortType = 'StageName'; sortReverse = !sortReverse">
                  Stage Name
                  <span ng-show="sortType == 'StageName' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'StageName' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </th>
              <th>
                <a ng-click="sortType = 'Amount'; sortReverse = !sortReverse">
                  Amount
                  <span ng-show="sortType == 'Amount' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'Amount' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </th>
              <th>
                <a ng-click="sortType = 'ForecastCategory'; sortReverse = !sortReverse">
                  Forecast Category
                  <span ng-show="sortType == 'ForecastCategory' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'ForecastCategory' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </th>
              <th>
                <a ng-click="sortType = 'ForecastCategoryName'; sortReverse = !sortReverse">
                  Forecast Category Name
                  <span ng-show="sortType == 'ForecastCategoryName' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'ForecastCategoryName' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </th>
              <th>
                <a ng-click="sortType = 'Fiscal_Period__c'; sortReverse = !sortReverse">
                  Fiscal
                  <span ng-show="sortType == 'Fiscal_Period__c' && !sortReverse" class="fa fa-caret-down"></span>
                  <span ng-show="sortType == 'Fiscal_Period__c' && sortReverse" class="fa fa-caret-up"></span>
                </a>
              </th>
              <th>Team</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="opport in opportunities | orderBy:sortType:sortReverse | filter:search" ng-if="opport.IsClosed === showClosedOpport">
              <th>{{opport.CreatedDate | date}}</th>
              <td><a class="openExternal" href="{{sf.loginUrl}}/{{opport.Id}}">{{opport.Name}}</a></td>
              <td>{{opport.StageName}}</td>
              <td>{{opport.Amount}}</td>
              <td>{{opport.ForecastCategory}}</td>
              <td>{{opport.ForecastCategoryName}}</td>
              <td>{{opport.Fiscal_Period__c}}</td>
              <td>
                <div ng-repeat="member in opport.OpportunityTeamMembers.records">
                  {{member.Name}}
                  :
                  {{member.TeamMemberRole}}
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
